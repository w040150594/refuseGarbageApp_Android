<a name="rnmxJ"></a>
## 选题背景
随着智慧城市的快速发展，居民的生活水平不断提高，人民对高质量生活环境绿色环保型社会的需求日益强烈。为了满足人民日益增长的生活需求，各种多元化的商品及生活用品蜂拥而至。随之而来的是日益增多的生活垃圾，对环境造成了极大的压力，有些城市已经出现了垃圾围城的现象。垃圾分类是造成环境污染、资源循环利用困难的一大因素，已成为我国需要解决的迫在眉睫的问题。在巨大的市场推动下，国内的垃圾分类公司如雨后春笋。为了实现对生活垃圾的初步分类，目前，市场上已推出可分类垃圾桶，但人们对垃圾是否可回收的概念模糊，常常也会造成垃圾的混乱投放。垃圾站传统的物理化学分类设备体积大，回收率低，导致许多可回收应用的垃圾未得到充分利用而导致巨大资源浪费。<br />因此，我便开发了了垃圾分类App，此系统运用了前沿人工智能技术，实现对垃圾的智能识别与分类。系统识别精准，从而可有效提高回收率、减少垃圾处理量、减轻环境污染、支持节能、促进循环经济的发展等，弥补传统垃圾分类系统的不足，解决由于前期垃圾分类不彻底造成的问题。
<a name="B6aMk"></a>
## 功能介绍截图演示
![首屏](https://cdn.nlark.com/yuque/0/2024/png/22336651/1704874296986-1dcd3881-5441-4ac4-aac4-dec34f7dc464.png#averageHue=%234d9a8a&clientId=u4918bf8f-a474-4&from=paste&height=1200&id=HmAGi&originHeight=2400&originWidth=1080&originalType=binary&ratio=2&rotation=0&showTitle=true&size=825636&status=done&style=none&taskId=ube457419-3f4f-404d-bd3b-ebb4e529063&title=%E9%A6%96%E5%B1%8F&width=540 "首屏")<br />![登录注册](https://cdn.nlark.com/yuque/0/2024/png/22336651/1704874331263-f6e52ee7-5376-4474-9354-a98d0487cef7.png#averageHue=%23f8f8f8&clientId=u4918bf8f-a474-4&from=paste&height=1200&id=YRqrs&originHeight=2400&originWidth=1080&originalType=binary&ratio=2&rotation=0&showTitle=true&size=164458&status=done&style=none&taskId=u8038c615-c040-4fa2-bf5c-598aa542016&title=%E7%99%BB%E5%BD%95%E6%B3%A8%E5%86%8C&width=540 "登录注册")<br />![首页](https://cdn.nlark.com/yuque/0/2024/png/22336651/1704874369829-07f9f5e0-77a6-4a36-81e8-d94263978259.png#averageHue=%239ccb70&clientId=u4918bf8f-a474-4&from=paste&height=1200&id=bNFJ7&originHeight=2400&originWidth=1080&originalType=binary&ratio=2&rotation=0&showTitle=true&size=661713&status=done&style=none&taskId=ub19b0557-2950-49f3-8d27-c304bbf6169&title=%E9%A6%96%E9%A1%B5&width=540 "首页")<br />![百科页](https://cdn.nlark.com/yuque/0/2024/png/22336651/1704874391325-279dfccc-165d-4e1b-a2b0-bfc573e47afa.png#averageHue=%236bdf6f&clientId=u4918bf8f-a474-4&from=paste&height=1200&id=ic1SP&originHeight=2400&originWidth=1080&originalType=binary&ratio=2&rotation=0&showTitle=true&size=718863&status=done&style=none&taskId=u3dded2f6-fbde-49cc-93e7-3c6897628c3&title=%E7%99%BE%E7%A7%91%E9%A1%B5&width=540 "百科页")<br />![设置](https://cdn.nlark.com/yuque/0/2024/png/22336651/1704879233073-0d33c034-cc4e-40f8-bb3d-b91e053ee692.png#averageHue=%23f7f7f7&clientId=uf06ec5d6-6dc7-4&from=paste&height=1200&id=ub1fe8708&originHeight=2400&originWidth=1080&originalType=binary&ratio=2&rotation=0&showTitle=true&size=168560&status=done&style=none&taskId=u8c475a1e-067c-445b-85df-04484e03cd0&title=%E8%AE%BE%E7%BD%AE&width=540 "设置")

![易错练习](https://cdn.nlark.com/yuque/0/2024/png/22336651/1704874421397-65e7777f-174f-4265-a434-4846e40f2b97.png#averageHue=%2367dd6b&clientId=u4918bf8f-a474-4&from=paste&height=1200&id=f2gkx&originHeight=2400&originWidth=1080&originalType=binary&ratio=2&rotation=0&showTitle=true&size=235280&status=done&style=none&taskId=u359d8df8-582a-4587-bdc1-b7ab7b12387&title=%E6%98%93%E9%94%99%E7%BB%83%E4%B9%A0&width=540 "易错练习")<br />![答题结果](https://cdn.nlark.com/yuque/0/2024/png/22336651/1704874476343-84377aba-c63e-4c10-a057-c4d4cebcdd75.png#averageHue=%23eeebeb&clientId=u4918bf8f-a474-4&from=paste&height=1200&id=cgymV&originHeight=2400&originWidth=1080&originalType=binary&ratio=2&rotation=0&showTitle=true&size=509150&status=done&style=none&taskId=u69307c78-e3ef-4087-a8c0-4ff714050d6&title=%E7%AD%94%E9%A2%98%E7%BB%93%E6%9E%9C&width=540 "答题结果")<br />![搜索页面（图片）](https://cdn.nlark.com/yuque/0/2024/png/22336651/1704874503050-4fd8768e-fc95-4b7e-b48c-94f728ffdb45.png#averageHue=%23305b30&clientId=u4918bf8f-a474-4&from=paste&height=1200&id=iMOdH&originHeight=2400&originWidth=1080&originalType=binary&ratio=2&rotation=0&showTitle=true&size=318497&status=done&style=none&taskId=u3f2e443d-9ade-44bb-aa80-185f31aac7d&title=%E6%90%9C%E7%B4%A2%E9%A1%B5%E9%9D%A2%EF%BC%88%E5%9B%BE%E7%89%87%EF%BC%89&width=540 "搜索页面（图片）")<br />![搜索页面（文字）](https://cdn.nlark.com/yuque/0/2024/png/22336651/1704879350964-131d4533-543d-4372-9d64-c9db0ce75876.png#averageHue=%2391e392&clientId=uf06ec5d6-6dc7-4&from=paste&height=1200&id=ueec77658&originHeight=2400&originWidth=1080&originalType=binary&ratio=2&rotation=0&showTitle=true&size=505318&status=done&style=none&taskId=u53d64291-f11c-4bee-9869-62230fd8e3d&title=%E6%90%9C%E7%B4%A2%E9%A1%B5%E9%9D%A2%EF%BC%88%E6%96%87%E5%AD%97%EF%BC%89&width=540 "搜索页面（文字）")
<a name="ougJR"></a>
## 技术实现、关键代码与解析
<a name="uSuMN"></a>
### 技术实现

- java
- SQLite数据库，存储垃圾相关数据和用户账号密码数据
- okhttp， 天聚数行垃圾分类免费接口获取垃圾分类热搜词，垃圾图像识别，垃圾关键词实时搜索。

![image.png](https://cdn.nlark.com/yuque/0/2024/png/22336651/1704874555012-b9769789-0f67-44a3-ab43-bb33f2710e7e.png#averageHue=%23e6d28f&clientId=u4918bf8f-a474-4&from=paste&height=175&id=u13dae5bf&originHeight=350&originWidth=2386&originalType=binary&ratio=2&rotation=0&showTitle=false&size=100477&status=done&style=none&taskId=ud8930a71-f316-45e4-ae08-dcc8b85033a&title=&width=1193)
<a name="NknEU"></a>
### 关键代码与解析
获取系统各种权限<br />![image.png](https://cdn.nlark.com/yuque/0/2024/png/22336651/1704877636936-82470ae8-5d2e-4f65-9170-d623f85cfed1.png#averageHue=%23fdf9f5&clientId=u4918bf8f-a474-4&from=paste&height=285&id=u975daab3&originHeight=570&originWidth=1552&originalType=binary&ratio=2&rotation=0&showTitle=false&size=275841&status=done&style=none&taskId=uc2cf6a27-1d72-4b2f-8e0d-ee6d0c830f6&title=&width=776)
<a name="LhR1l"></a>
#### 登录注册
![image.png](https://cdn.nlark.com/yuque/0/2024/png/22336651/1704874915589-231e4a60-0a77-44d2-a0f3-d45ab744e698.png#averageHue=%23fefefe&clientId=u4918bf8f-a474-4&from=paste&height=205&id=u58c417be&originHeight=410&originWidth=1390&originalType=binary&ratio=2&rotation=0&showTitle=false&size=84456&status=done&style=none&taskId=ud07d6c40-851c-4543-8d16-66aca924c54&title=&width=695)

1. 通过SQLite 存储用户账号密码
2. SharedPreferences 记住账号密码
<a name="b2Z20"></a>
#### 首页

1. 使用 okhttp 实现实时调用获取垃圾分类热搜
2. 结果按照热度降序排名展示

![image.png](https://cdn.nlark.com/yuque/0/2024/png/22336651/1704875365029-7dee3373-9565-4b26-bfe5-106c9a6beede.png#averageHue=%23fdfdfb&clientId=u4918bf8f-a474-4&from=paste&height=742&id=u642cdfe0&originHeight=1484&originWidth=1602&originalType=binary&ratio=2&rotation=0&showTitle=false&size=414211&status=done&style=none&taskId=u01364054-b2ed-4ffa-a37d-fa11b4c2212&title=&width=801)
<a name="dhfiu"></a>
#### 垃圾分类搜索页面 
<a name="l9Lxc"></a>
##### **文字搜索**

1. 先在本地数据库SQLite 搜索匹配的垃圾，并展示结果
2. 若本地搜索不到，就去请求远程接口获取

![image.png](https://cdn.nlark.com/yuque/0/2024/png/22336651/1704875658477-794fe3cb-8e32-4527-a634-0cf92cd5240f.png#averageHue=%23fdfdfd&clientId=u4918bf8f-a474-4&from=paste&height=425&id=u337b6c25&originHeight=850&originWidth=1614&originalType=binary&ratio=2&rotation=0&showTitle=false&size=215940&status=done&style=none&taskId=udb0c0cfa-720d-4c7c-af2e-4eb0648a5aa&title=&width=807)
<a name="ytYX8"></a>
##### **图像识别**

1. 先将从拍照或者本地图库获取到的图片进行压缩然后转为为 base64（远程接口上限 3M）
2. 核心压缩算法压缩后判断大小是否超标，不超过继续降低质量压缩直到大小 3M 一下，以确保在图片大小 3M 范围内图片质量最大化，提高识别准确度
3. 将压缩处理后图片通过调用图像识别识别垃圾结果展示给用户

![image.png](https://cdn.nlark.com/yuque/0/2024/png/22336651/1704875825979-b4c331d5-8420-468b-a3e6-6d25e80e073d.png#averageHue=%23fcfbfa&clientId=u4918bf8f-a474-4&from=paste&height=593&id=u29b4ec23&originHeight=1186&originWidth=1592&originalType=binary&ratio=2&rotation=0&showTitle=false&size=353271&status=done&style=none&taskId=u60266fe7-82e8-48eb-bc38-88bb26cd1a9&title=&width=796)
<a name="YiAgk"></a>
#### 易错练习页面

1. 首先生成题目
2. 每次选择答案提交后，判断所选答案和正确答案，做出相应处理，存储结构使用哈希表
3. 答题数量到 10 题后，根据前面的哈希表存储的答题情况展示答题结果和分数

![image.png](https://cdn.nlark.com/yuque/0/2024/png/22336651/1704876211875-7c41eda5-df57-47df-9a2b-ddfdda78bdbb.png#averageHue=%23fdfdfc&clientId=u4918bf8f-a474-4&from=paste&height=754&id=tLkA8&originHeight=1508&originWidth=1624&originalType=binary&ratio=2&rotation=0&showTitle=false&size=348219&status=done&style=none&taskId=u3785a73a-ba73-40f5-9943-d3792d2710f&title=&width=812)
<a name="QOxlh"></a>
#### 百科页

1. 页面嵌入 webview 控件，加载百度百科网页权威的垃圾分类定义和科普，方便用户查阅

![image.png](https://cdn.nlark.com/yuque/0/2024/png/22336651/1704876487617-164d0281-2ef0-4cc4-b291-89431212edef.png#averageHue=%23fcfcfc&clientId=u4918bf8f-a474-4&from=paste&height=290&id=PcXA9&originHeight=580&originWidth=1722&originalType=binary&ratio=2&rotation=0&showTitle=false&size=196663&status=done&style=none&taskId=ua6bc97be-a602-4cfb-8da1-c932c5f5bfa&title=&width=861)
<a name="yLION"></a>
#### 设置页
**创建并显示通知：**

1. 获取NotificationManager服务，这是用来管理通知的系统服务。
2. 设置PendingIntent，当用户点击通知时，将启动NotificationActivity。
3. 使用NotificationManager的notify方法来显示通知。

![image.png](https://cdn.nlark.com/yuque/0/2024/png/22336651/1704877373471-71718f0c-3d6c-4347-8d3d-9de4a57edd99.png#averageHue=%23fdfdfc&clientId=u4918bf8f-a474-4&from=paste&height=485&id=u530d0fcf&originHeight=970&originWidth=2186&originalType=binary&ratio=2&rotation=0&showTitle=false&size=339736&status=done&style=none&taskId=u3115e822-5cab-4207-a13d-0c13b1e4e44&title=&width=1093)<br />**联系我们：**

1. 创建一个Intent用于启动拨号界面。
2. 使用Intent.ACTION_DIAL作为动作，并通过setData方法设置电话号码。
3. 调用startActivity方法启动拨号界面。

![image.png](https://cdn.nlark.com/yuque/0/2024/png/22336651/1704877385753-70c8a00b-2359-4edf-9a11-0841f3378eac.png#averageHue=%23fcfbfa&clientId=u4918bf8f-a474-4&from=paste&height=167&id=u75dd53b0&originHeight=334&originWidth=1142&originalType=binary&ratio=2&rotation=0&showTitle=false&size=83470&status=done&style=none&taskId=ubf0d6fd6-620a-4eb4-89a3-b0d997b7155&title=&width=571)<br />**退出登录：**

1. 创建一个新的Intent，其动作为"com.example.refuseclassification.FORCE_OFFLINE"。
2. 通过当前活动的上下文（getActivity()）发送这个广播，通知广播接收器执行退出登录后销毁 activity 等操作

![image.png](https://cdn.nlark.com/yuque/0/2024/png/22336651/1704877465106-d07f00d5-752b-4365-ab47-36c6fccdd42e.png#averageHue=%23fcfbfa&clientId=u4918bf8f-a474-4&from=paste&height=196&id=u330e3803&originHeight=392&originWidth=1462&originalType=binary&ratio=2&rotation=0&showTitle=false&size=93054&status=done&style=none&taskId=u270f58b4-bb70-474f-9d58-ccd031d4787&title=&width=731)
<a name="pTmWq"></a>
## 心得体会
通过本次垃圾分类 app 的开发，我熟悉了使用 okhttp 获取远程接数据，掌握了调用本地相机，本地图库实现对图片的压缩转码技术，以及本地 SQLite SharedPreferences 存储技术的使用，加深了技术应该为内容和用户服务的思想。总的来说，结合这些安卓技术开发有用有价值的 垃圾分类 app 收货很大！
